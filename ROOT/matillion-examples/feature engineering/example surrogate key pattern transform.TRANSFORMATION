{"job":{"components":{"1986":{"id":1986,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":832,"y":160,"width":32,"height":32,"inputConnectorIDs":[2000,2010],"outputConnectorIDs":[2048],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"},"2":{"slot":2,"type":"STRING","value":"e"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"n\".\"bus_key_part1\" = \"e\".\"bus_key_part1\"\nAND \"n\".\"bus_key_part2\" = \"e\".\"bus_key_part2\""},"2":{"slot":2,"type":"STRING","value":"n_Left_e"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part1"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part2"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1987":{"id":1987,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":704,"y":224,"width":32,"height":32,"inputConnectorIDs":[2009],"outputConnectorIDs":[2010],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1988":{"id":1988,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":738944574,"x":496,"y":80,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[2000],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"40"},"4":{"slot":4,"type":"INTEGER","value":""}}}},"visible":true},"3":{"slot":3,"name":"Values","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AAA"},"2":{"slot":2,"type":"STRING","value":"x"},"3":{"slot":3,"type":"STRING","value":"somevalue"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"1"},"3":{"slot":3,"type":"STRING","value":"new value"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"2"},"3":{"slot":3,"type":"STRING","value":"another new value"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1989":{"id":1989,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1949249710,"x":568,"y":287,"width":32,"height":32,"inputConnectorIDs":[2008],"outputConnectorIDs":[2009,2050],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replicate 0"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1990":{"id":1990,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":445,"y":295,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[2008],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1991":{"id":1991,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1520,"y":224,"width":32,"height":32,"inputConnectorIDs":[2006],"outputConnectorIDs":[2007],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1992":{"id":1992,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1408,"y":224,"width":32,"height":32,"inputConnectorIDs":[2005],"outputConnectorIDs":[2006],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add SK"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"sk_base\" + \"rowseq\""},"2":{"slot":2,"type":"STRING","value":"sk"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1993":{"id":1993,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":1296,"y":224,"width":32,"height":32,"inputConnectorIDs":[2003,2004],"outputConnectorIDs":[2005],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join for new SK baseline"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"},"2":{"slot":2,"type":"STRING","value":"baseline"},"3":{"slot":3,"type":"STRING","value":"Inner"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1 = 1"},"2":{"slot":2,"type":"STRING","value":"n_Inner_baseline"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"n.rowseq"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"baseline.sk_base"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1994":{"id":1994,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":1165,"y":155,"width":32,"height":32,"inputConnectorIDs":[2002],"outputConnectorIDs":[2003],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns.","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Asc"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Asc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1995":{"id":1995,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":944,"y":352,"width":32,"height":32,"inputConnectorIDs":[2001],"outputConnectorIDs":[2004],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(\"max_sk\", 0)"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1996":{"id":1996,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1701703136,"x":832,"y":352,"width":32,"height":32,"inputConnectorIDs":[2050],"outputConnectorIDs":[2001],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Max SK"}}}},"visible":true},"2":{"slot":2,"name":"Groupings","elements":{},"visible":true},"3":{"slot":3,"name":"Aggregations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"Max"}}}},"visible":true},"4":{"slot":4,"name":"Grouping Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Group By"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1997":{"id":1997,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1056,"y":160,"width":32,"height":32,"inputConnectorIDs":[2049],"outputConnectorIDs":[2002],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1998":{"id":1998,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":939,"y":155,"width":32,"height":32,"inputConnectorIDs":[2048],"outputConnectorIDs":[2049],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Filter 0"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1999":{"id":1999,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":1664,"y":224,"width":32,"height":32,"inputConnectorIDs":[2007],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example 0"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Append"}}}},"visible":true},"200":{"slot":200,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"201":{"slot":201,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"202":{"slot":202,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"203":{"slot":203,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"204":{"slot":204,"name":"Order By","elements":{},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"2000":{"id":2000,"sourceID":1988,"targetID":1986},"2001":{"id":2001,"sourceID":1996,"targetID":1995},"2002":{"id":2002,"sourceID":1997,"targetID":1994},"2003":{"id":2003,"sourceID":1994,"targetID":1993},"2004":{"id":2004,"sourceID":1995,"targetID":1993},"2005":{"id":2005,"sourceID":1993,"targetID":1992},"2006":{"id":2006,"sourceID":1992,"targetID":1991},"2007":{"id":2007,"sourceID":1991,"targetID":1999},"2008":{"id":2008,"sourceID":1990,"targetID":1989},"2009":{"id":2009,"sourceID":1989,"targetID":1987},"2010":{"id":2010,"sourceID":1987,"targetID":1986},"2048":{"id":2048,"sourceID":1986,"targetID":1998},"2049":{"id":2049,"sourceID":1998,"targetID":1997},"2050":{"id":2050,"sourceID":1989,"targetID":1996}},"notes":{"1979":{"id":1979,"x":786,"y":264,"width":216,"height":137,"text":"This generates the starting value for new surrogate keys, by finding the highest one that already exists","colour":"00ce4f"},"1980":{"id":1980,"x":1101,"y":374,"width":695,"height":99,"text":"This job is an example of data having \"state\".\n\n- When you run it for the **first** time, two new records will be added.\n- When you run it a **subsequent** time, there is nothing more to add\n\nMore details at [[https://www.matillion.com/resources/developer-relations/data-has-state-data-functions-and-design-patterns]]","colour":"e6e63c"},"1981":{"id":1981,"x":1576,"y":150,"width":172,"height":132,"text":"Append","colour":"00ce4f"},"1982":{"id":1982,"x":1235,"y":151,"width":323,"height":132,"text":"Generate new SKs","colour":"00ce4f"},"1983":{"id":1983,"x":360,"y":23,"width":257,"height":121,"text":"New data","colour":"00ce4f"},"1984":{"id":1984,"x":360,"y":231,"width":257,"height":121,"text":"Existing data","colour":"00ce4f"},"1985":{"id":1985,"x":786,"y":82,"width":216,"height":137,"text":"This is an anti-join.\nIt removes any new data where the business key already exists.","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"example surrogate key pattern transform","description":"Demonstrates the surrogate key generator pattern","type":"TRANSFORMATION","tag":"6ee88631-d38b-4e39-a8c6-1687bd9af039"}}